/* CHINOOK DATABASE USED AS GUIDE FOR SYNTAX */

-- remove the database if it already exists
DROP USER ERS CASCADE;

-- create a new database
CREATE USER ERS
IDENTIFIED BY sinhacp1Revature
DEFAULT TABLESPACE USERS
TEMPORARY TABLESPACE TEMP
QUOTA 10M ON USERS;

-- give the table permissions
GRANT CONNECT TO ERS;
GRANT RESOURCE TO ERS;
GRANT CREATE SESSION TO ERS;
GRANT CREATE TABLE TO ERS;
GRANT CREATE VIEW TO ERS;

-- connect to the database
CONN ERS/sinhacp1Revature

-- create tables
CREATE TABLE ERS.MANAGER (
    MANAGER_ID NUMBER(9) NOT NULL,
    FIRSTNAME VARCHAR2(100),
    LASTNAME VARCHAR2(100),
    MANAGER_USERNAME VARCHAR2(100) NOT NULL,
    MANAGER_PASSWORD VARCHAR2(100) NOT NULL,
    CONSTRAINT PK_MANAGER PRIMARY KEY (MANAGER_ID)
);

CREATE TABLE ERS.EMPLOYEE (
    EMPLOYEE_ID NUMBER(9) NOT NULL,
    FIRSTNAME VARCHAR2(100),
    LASTNAME VARCHAR2(100),
    EMPLOYEE_USERNAME VARCHAR2(100) NOT NULL,
    EMPLOYEE_PASSWORD VARCHAR2(100) NOT NULL,
    --PROFILE INFO: PHONE NO., EMAIL, ADDRESS
    CONSTRAINT PK_EMPLOYEE PRIMARY KEY (EMPLOYEE_ID)
);

CREATE TABLE ERS.REQUEST (
    REQUEST_ID NUMBER(38) NOT NULL,
    STATUS VARCHAR(8),
    AMOUNT NUMBER(8,2) NOT NULL,
    EMPLOYEE_ID NUMBER(9) NOT NULL,
    MANAGER_ID NUMBER(9),
    CONSTRAINT PK_REQUEST PRIMARY KEY (REQUEST_ID)
);

-- create foreign keys
ALTER TABLE ERS.REQUEST
ADD CONSTRAINT FK_MANAGER_ID
FOREIGN KEY (MANAGER_ID) 
REFERENCES ERS.MANAGER (MANAGER_ID)
ON DELETE CASCADE;

ALTER TABLE ERS.REQUEST
ADD CONSTRAINT FK_EMPLOYEE_ID
FOREIGN KEY (EMPLOYEE_ID) 
REFERENCES ERS.EMPLOYEE (EMPLOYEE_ID)
ON DELETE CASCADE;

-- populate employee table
INSERT INTO ERS.EMPLOYEE (EMPLOYEE_ID, FIRSTNAME, LASTNAME, EMPLOYEE_USERNAME, EMPLOYEE_PASSWORD) VALUES (1, 'Thomasin', 'Lainge', 'tlainge0', 'VGk0y89Vl8');
INSERT INTO ERS.EMPLOYEE (EMPLOYEE_ID, FIRSTNAME, LASTNAME, EMPLOYEE_USERNAME, EMPLOYEE_PASSWORD) VALUES (2, 'Kellia', 'McCaighey', 'kmccaighey1', '3M6eNg');
INSERT INTO ERS.EMPLOYEE (EMPLOYEE_ID, FIRSTNAME, LASTNAME, EMPLOYEE_USERNAME, EMPLOYEE_PASSWORD) VALUES (3, 'Geoff', 'Delue', 'gdelue2', '1ki6rLXMPgL');
INSERT INTO ERS.EMPLOYEE (EMPLOYEE_ID, FIRSTNAME, LASTNAME, EMPLOYEE_USERNAME, EMPLOYEE_PASSWORD) VALUES (4, 'Penny', 'Soame', 'psoame3', 'fUowXdib');
INSERT INTO ERS.EMPLOYEE (EMPLOYEE_ID, FIRSTNAME, LASTNAME, EMPLOYEE_USERNAME, EMPLOYEE_PASSWORD) VALUES (5, 'Emilia', 'Prinn', 'eprinn4', 'DUtRFbp8yod');
INSERT INTO ERS.EMPLOYEE (EMPLOYEE_ID, FIRSTNAME, LASTNAME, EMPLOYEE_USERNAME, EMPLOYEE_PASSWORD) VALUES (6, 'Sylvester', 'Theuss', 'stheuss5', 'HhAlRVgP24');
INSERT INTO ERS.EMPLOYEE (EMPLOYEE_ID, FIRSTNAME, LASTNAME, EMPLOYEE_USERNAME, EMPLOYEE_PASSWORD) VALUES (7, 'Anatollo', 'Gisbourn', 'agisbourn6', '6unjrig2');
INSERT INTO ERS.EMPLOYEE (EMPLOYEE_ID, FIRSTNAME, LASTNAME, EMPLOYEE_USERNAME, EMPLOYEE_PASSWORD) VALUES (8, 'Misti', 'Gann', 'mgann7', 'tljUWCc');
INSERT INTO ERS.EMPLOYEE (EMPLOYEE_ID, FIRSTNAME, LASTNAME, EMPLOYEE_USERNAME, EMPLOYEE_PASSWORD) VALUES (9, 'Sibella', 'Insole', 'sinsole8', 'lPGgwegQF');
INSERT INTO ERS.EMPLOYEE (EMPLOYEE_ID, FIRSTNAME, LASTNAME, EMPLOYEE_USERNAME, EMPLOYEE_PASSWORD) VALUES (10, 'Izzy', 'Shepeard', 'ishepeard9', '9j5JuElj9Ifc');
INSERT INTO ERS.EMPLOYEE (EMPLOYEE_ID, FIRSTNAME, LASTNAME, EMPLOYEE_USERNAME, EMPLOYEE_PASSWORD) VALUES (11, 'Eryn', 'Ege', 'eegea', 'ahsyDwbOPpeK');
INSERT INTO ERS.EMPLOYEE (EMPLOYEE_ID, FIRSTNAME, LASTNAME, EMPLOYEE_USERNAME, EMPLOYEE_PASSWORD) VALUES (12, 'Fanchon', 'Skullet', 'fskulletb', 'ONbT4KcBk');
INSERT INTO ERS.EMPLOYEE (EMPLOYEE_ID, FIRSTNAME, LASTNAME, EMPLOYEE_USERNAME, EMPLOYEE_PASSWORD) VALUES (13, 'Philbert', 'Veld', 'pveldc', 'pJbaIl8');
INSERT INTO ERS.EMPLOYEE (EMPLOYEE_ID, FIRSTNAME, LASTNAME, EMPLOYEE_USERNAME, EMPLOYEE_PASSWORD) VALUES (14, 'Goddart', 'Grumble', 'ggrumbled', 'dkhfqe7pJ');
INSERT INTO ERS.EMPLOYEE (EMPLOYEE_ID, FIRSTNAME, LASTNAME, EMPLOYEE_USERNAME, EMPLOYEE_PASSWORD) VALUES (15, 'Lilas', 'Lozano', 'llozanoe', 'ogWlQle');
INSERT INTO ERS.EMPLOYEE (EMPLOYEE_ID, FIRSTNAME, LASTNAME, EMPLOYEE_USERNAME, EMPLOYEE_PASSWORD) VALUES (16, 'Neill', 'Stealey', 'nstealeyf', 'cPxpVeeNj0');
INSERT INTO ERS.EMPLOYEE (EMPLOYEE_ID, FIRSTNAME, LASTNAME, EMPLOYEE_USERNAME, EMPLOYEE_PASSWORD) VALUES (17, 'Kizzee', 'Hartill', 'khartillg', '9W6Yp1hhRXGJ');
INSERT INTO ERS.EMPLOYEE (EMPLOYEE_ID, FIRSTNAME, LASTNAME, EMPLOYEE_USERNAME, EMPLOYEE_PASSWORD) VALUES (18, 'Eugine', 'Oughtright', 'eoughtrighth', 'XyIHiiR5qW44');
INSERT INTO ERS.EMPLOYEE (EMPLOYEE_ID, FIRSTNAME, LASTNAME, EMPLOYEE_USERNAME, EMPLOYEE_PASSWORD) VALUES (19, 'Moss', 'Klimmek', 'mklimmeki', 'VjGk3vHwPw');
INSERT INTO ERS.EMPLOYEE (EMPLOYEE_ID, FIRSTNAME, LASTNAME, EMPLOYEE_USERNAME, EMPLOYEE_PASSWORD) VALUES (20, 'Piggy', 'Muris', 'pmurisj', 'YzuCZV');

-- populate manager table
INSERT INTO ERS.MANAGER (MANAGER_ID, FIRSTNAME, LASTNAME, MANAGER_USERNAME, MANAGER_PASSWORD) VALUES (1, 'Nolan', 'Gavey', 'ngavey0', 'TBbuIT0F4Bs');
INSERT INTO ERS.MANAGER (MANAGER_ID, FIRSTNAME, LASTNAME, MANAGER_USERNAME, MANAGER_PASSWORD) VALUES (2, 'Woodman', 'Barzen', 'wbarzen1', 'uQHSjLwHRaB');
INSERT INTO ERS.MANAGER (MANAGER_ID, FIRSTNAME, LASTNAME, MANAGER_USERNAME, MANAGER_PASSWORD) VALUES (3, 'Demetria', 'Justice', 'djustice2', 'I30NRWPjXpfe');
INSERT INTO ERS.MANAGER (MANAGER_ID, FIRSTNAME, LASTNAME, MANAGER_USERNAME, MANAGER_PASSWORD) VALUES (4, 'Addy', 'Kamien', 'akamien3', 'PBhb3sEMk');
INSERT INTO ERS.MANAGER (MANAGER_ID, FIRSTNAME, LASTNAME, MANAGER_USERNAME, MANAGER_PASSWORD) VALUES (5, 'Corilla', 'Ullett', 'cullett4', 'nOV4K2');
INSERT INTO ERS.MANAGER (MANAGER_ID, FIRSTNAME, LASTNAME, MANAGER_USERNAME, MANAGER_PASSWORD) VALUES (6, 'Harlene', 'Naris', 'hnaris5', '32iPmdRw');
INSERT INTO ERS.MANAGER (MANAGER_ID, FIRSTNAME, LASTNAME, MANAGER_USERNAME, MANAGER_PASSWORD) VALUES (7, 'Tresa', 'Teenan', 'tteenan6', 'wzFg8dMVQnH3');
INSERT INTO ERS.MANAGER (MANAGER_ID, FIRSTNAME, LASTNAME, MANAGER_USERNAME, MANAGER_PASSWORD) VALUES (8, 'Lucien', 'Hastewell', 'lhastewell7', 'kW85Msk0');
INSERT INTO ERS.MANAGER (MANAGER_ID, FIRSTNAME, LASTNAME, MANAGER_USERNAME, MANAGER_PASSWORD) VALUES (9, 'Paquito', 'McLevie', 'pmclevie8', 'IRtSHMnXh');
INSERT INTO ERS.MANAGER (MANAGER_ID, FIRSTNAME, LASTNAME, MANAGER_USERNAME, MANAGER_PASSWORD) VALUES (10, 'Flynn', 'Senogles', 'fsenogles9', 'TcxuvkfKpTw');

-- populate request table
INSERT INTO ERS.REQUEST (REQUEST_ID, STATUS, AMOUNT, EMPLOYEE_ID, MANAGER_ID) VALUES (1, 'pending', '5.65', 4, 9);
INSERT INTO ERS.REQUEST (REQUEST_ID, STATUS, AMOUNT, EMPLOYEE_ID, MANAGER_ID) VALUES (2, 'pending', '6.36', 5, 6);
INSERT INTO ERS.REQUEST (REQUEST_ID, STATUS, AMOUNT, EMPLOYEE_ID, MANAGER_ID) VALUES (3, 'approved', '0.24', 9, 1);
INSERT INTO ERS.REQUEST (REQUEST_ID, STATUS, AMOUNT, EMPLOYEE_ID, MANAGER_ID) VALUES (4, 'pending', '7.83', 1, 8);
INSERT INTO ERS.REQUEST (REQUEST_ID, STATUS, AMOUNT, EMPLOYEE_ID, MANAGER_ID) VALUES (5, 'pending', '6.96', 6, 6);
INSERT INTO ERS.REQUEST (REQUEST_ID, STATUS, AMOUNT, EMPLOYEE_ID, MANAGER_ID) VALUES (6, 'approved', '3.79', 7, 1);
INSERT INTO ERS.REQUEST (REQUEST_ID, STATUS, AMOUNT, EMPLOYEE_ID, MANAGER_ID) VALUES (7, 'denied', '0.91', 1, 5);
INSERT INTO ERS.REQUEST (REQUEST_ID, STATUS, AMOUNT, EMPLOYEE_ID, MANAGER_ID) VALUES (8, 'approved', '9.50', 4, 8);
INSERT INTO ERS.REQUEST (REQUEST_ID, STATUS, AMOUNT, EMPLOYEE_ID, MANAGER_ID) VALUES (9, 'pending', '3.16', 5, 3);
INSERT INTO ERS.REQUEST (REQUEST_ID, STATUS, AMOUNT, EMPLOYEE_ID, MANAGER_ID) VALUES (10, 'pending', '8.47', 6, 5);
COMMIT;

SELECT * FROM ERS.EMPLOYEE;
SELECT * FROM ERS.REQUEST WHERE STATUS != 'pending';

SELECT MAX(REQUEST_ID) FROM ERS.REQUEST;

INSERT INTO ERS.REQUEST (REQUEST_ID, STATUS, AMOUNT, EMPLOYEE_ID) VALUES (16, 'approved', '2.00', 4);

